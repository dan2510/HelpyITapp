<!-- Listado de Técnicos para Avance 3 -->
<div class="tecnicos-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        <mat-icon>engineering</mat-icon>
        Lista de Técnicos
      </mat-card-title>
      <mat-card-subtitle>
        Personal técnico disponible para soporte
      </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content>
      <!-- Loading spinner -->
      <div *ngIf="loading" class="loading-container">
      
      </div>

      <!-- Error message -->
      <div *ngIf="error && !loading" class="error-container">
        <mat-icon color="warn">error</mat-icon>
        <p>{{ error }}</p>
        <button mat-button color="primary" (click)="loadTecnicos()">
          Reintentar
        </button>
      </div>

      <!-- Lista de técnicos (máximo 3 campos según avance 3) -->
      <div *ngIf="!loading && !error" class="tecnicos-grid">
        <mat-card 
          *ngFor="let tecnico of tecnicos" 
          class="tecnico-card"
          (click)="verDetalle(tecnico.id)"
          matRipple>
          
          <!-- Campo 1: Nombre completo -->
          <mat-card-header>
            <mat-icon mat-card-avatar>person</mat-icon>
            <mat-card-title>{{ tecnico.nombrecompleto }}</mat-card-title>
          </mat-card-header>

          <mat-card-content>
            <!-- Campo 2: Disponibilidad -->
            <div class="availability-section">
              <mat-icon [color]="getDisponibilidadColor(tecnico.disponibilidad)">
                {{ tecnico.disponibilidad === 'DISPONIBLE' ? 'check_circle' : 
                   tecnico.disponibilidad === 'OCUPADO' ? 'schedule' : 'cancel' }}
              </mat-icon>
              <span [class]="'status-' + tecnico.disponibilidad.toLowerCase()">
                {{ tecnico.disponibilidad }}
              </span>
            </div>

            <!-- Campo 3: Carga actual -->
            <div class="workload-section">
              <mat-icon>assignment</mat-icon>
              <span>Tickets: {{ tecnico.cargaactual }}</span>
            </div>
          </mat-card-content>

          <mat-card-actions align="end">
            <button 
              mat-button 
              color="primary"
              (click)="verDetalle(tecnico.id); $event.stopPropagation()">
              <mat-icon>visibility</mat-icon>
              Ver Detalle
            </button>
          </mat-card-actions>
        </mat-card>
      </div>

      <!-- Mensaje si no hay técnicos -->
      <div *ngIf="!loading && !error && tecnicos.length === 0" class="no-data">
        <mat-icon>person_off</mat-icon>
        <p>No se encontraron técnicos</p>
      </div>
    </mat-card-content>
  </mat-card>
</div>